<h2>Object Types</h2>
<?php
// New item form
?>
<form id="form_1" >
<input type="hidden" id="ax" name="ax" value="new_item_1" >
Type ID:   <input type="text" id="type_id" name="type_id" value="" >
Type Name: <input type="text" id="type_name" name="type_name" value="" >
<input type="submit" value="Enter" >
</form>
<?php
// Item list
?>
<h1>List...</h1>
<div id="item_list">
<ul>
<?php foreach($action_data['table_list'] as $row) { ?>

<li><?php echo $row['id'] . ' - ' . $row['type_id'] . ' - ' . $row['type_name']; ?></li>

<?php } ?>
</ul>
</div>

<?php

// Do we have rows?
para('Row count:' . count($action_data['table_list']));

// How many fields
para('Field count:' . count($action_data['table_list'][0]));
?>

<div style="border:solid #f00 2px;padding:1em;"><?php echo do_list($action_data); ?></div>

<?php

// Full json
para(json_encode($action_data));

// Functions 
function do_list($action_data)
{
	$html = '';
	if(isset($action_data['table_list']))
	{
		// Set table data
		$table_data = $action_data['table_list'];
		
		if( count($table_data) > 0)
		{	
			foreach($table_data as $table_row)
			{
				$html .= do_row($table_row);
			}
		}
		else
		{
			$html = 'No rows.';
		}
	}
	else
	{
		$html = 'No table data array: table_list';
	}
	return $html;
}

function do_row($row)
{
	$NL = "\n";
	$html = '<form id="form_' . $row['id'] . '" >' . $NL;
	$html .= '<input type="hidden" name="ax" value="update_item" >' . $NL;
	$html .= '<input type="hidden" name="idx" value="' . $row['id'] . '" >' . $NL;
	foreach($row as $field_value)
	{
		$field_data['type']  = 'text';
		$field_data['name']  = 'text';
		$field_data['value'] = $field_value;
		$html .= do_input($field_data);
	}
	$html .= '<input type="submit" value="Update" >' . $NL;
	$html .= '<button>Delete</button>' . $NL;
	$html .= '</form>' . $NL;
	return $html;
}

function do_input($field_data)
{
	$NL = "\n";
	//$html = '<p>' . $field_data . '</p>';
	$html = '<input type="' . $field_data['type'] . '" name="' . $field_data['name'] . '" value="' . $field_data['value'] . '" >' . $NL;
	return $html;
}




function para($string)
{
	echo '<p>' . $string . '</p>' . "\n";
}

?>